---

copyright:
  years: 2017
lastupdated: "2017-6-22"

---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen:.screen}
{:codeblock:.codeblock}

# 管理作業
{: #tasks_overview}

作業代表與軟體部署相關聯的某個有意義的業務活動。作業定義於部署計劃中。

{:shortdesc}

大部分作業都會有起點、結束點，以及可測量的持續時間。作業可以是下列其中一種類型：

<ul>
<li>**手動**作業可以代表任何與軟體部署相關聯的活動，例如讓伺服器離線，或更新資料庫。</li>
<li>**UrbanCode Deploy** 作業代表 IBM&reg; UrbanCode&reg; Deploy 應用程式。您可以搭配執行 UrbanCode Deploy 應用程式與此作業類型。</li>
<li>**Continuous Delivery 管線**作業代表 {{site.data.keyword.contdelivery_full}} 管線。您可以使用此作業類型來管理 {{site.data.keyword.contdelivery_short}} 管線。</li>
<li>**延遲**作業代表在特定時間發生的重大事件。</li>
<li>**標頭**作業是組織元素。例如，您可以使用標頭作業來識別作業群組。</li>
<li>**電子郵件**作業會在執行時傳送電子郵件訊息。</li>
<li>**執行另一個計劃**作業會針對參與相同版本事件的其他部署計劃執行部署。這是實驗性作業類型。</li>
<l1>**Slack** 作業會在執行時將訊息傳送至 Slack 頻道。</l1>
</ul>

您可以建立作業以將作業新增至部署計劃，或者從 IBM UrbanCode Release 或另一個應用程式所建立的 CSV 檔案中匯入作業。您也可以複製其他部署計劃中的作業。如需 CSV 檔案格式的相關資訊，請參閱[匯入作業](/docs/services/UCCR/UCCR_deployPlan.html#plan_importTasks)。

## 建立作業
{: #tasks_create}

當您建立作業時，可以選取要在其中新增作業的部署計劃。依預設，新的作業會插入部署計劃底端。建立作業之後，您可以將其移至或複製並貼入另一個部署計劃。[您也可以建立與其他作業的相依關係](/docs/services/UCCR/UCCR_tasks.html#tasks_dependencies)。

儲存作業之後，即會顯示作業的動作圖示。您可以在部署期間使用動作圖示來變更作業的狀態。所有作業都會有**跳過**動作圖示。其他圖示（例如**啟動**）會在環境定義適用時顯示。

![](images/deploy-plan-intro.png "一般部署計劃")

圖 1. 簡單部署計劃，其中包含作業及動作按鈕

部署計劃中的每一個作業都包含在個別列中。下表說明針對每一個作業所顯示的資訊。

### 表 1. 作業內容

| 內容  | 說明  |
| ------------------ | ------------------ |
| 名稱               |作業名稱       |
| 類型               |作業類型：手動、UrbanCode Deploy、延遲、標頭 |             
| 狀態               |作業狀態：未啟動、完成、失敗、跳過、不適用 |
| 擁有者             |獲指派作業的人員                                                        |
| 開始時間  |開始時間，或根據排程開始時間或其他作業預估持續時間而預期的開始時間        |
| 結束時間               |解決作業的時間        |
| 持續時間               |從作業開始到作業解決的時間長度（以分鐘為單位）        |
| 相依關係               |指出為作業必要條件並且相依於該作業的作業數目        |

---
將作業新增至部署計劃之後，您可以透過以下數種方式來進行管理。

若要移動作業，請按一下作業上的任何位置，並將它拖曳至新位置。

若要複製作業或群組，請選取作業，按一下**複製** <img class="inline" src="images/copy-group.png"  alt="「複製」按鈕">，然後將游標放在您要插入所複製作業的位置，再按一下**貼上** <img class="inline" src="images/paste-group.png"  alt="「貼上」按鈕">。

若要從部署計劃中剪下作業或群組，請選取作業，然後按一下**剪下** <img class="inline" src="images/cut-group.png"  alt="「剪下」按鈕">。

若要刪除作業，請選取作業，然後按一下**刪除** <img class="inline" src="images/trash-group.png"  alt="「刪除」按鈕">。即會從部署計劃中移除作業。

## 建立 UrbanCode Deploy 作業
{: #tasks_UDTasks}

UrbanCode Deploy 作業會管理 UrbanCode Deploy 應用程式。當您執行 UrbanCode Deploy 作業時，即可使用作業所指定的處理程序、版本及環境來執行關聯的 UrbanCode Deploy 應用程式。您可以在設計時間設定版本及環境，或等待並在執行時選取它們。

在部署期間，UrbanCode Deploy 作業會有資格執行時自動啟動。   

**重要事項**：應用程式會在 {{site.data.keyword.uccr_short}} 與 UrbanCode Deploy 整合之後可供使用。可用於部署計劃的應用程式取決於指派給計劃的團隊。在 {{site.data.keyword.uccr_short}} 中，也可以使用 UrbanCode Deploy 中的團隊所管理的應用程式。

請完成下列作業來建立 UrbanCode Deploy 作業。

1. 在「部署計劃詳細資料」頁面上，按一下**建立作業**。如果您要在計劃的特定位置插入作業，請在使用**建立作業**之前選取作業。新的作業會插入到所選取作業的上方。

1. 在「建立作業」對話框上，於**類型**清單中選取 **UrbanCode Deploy**。

1. 在**名稱**欄位中，輸入作業的名稱。

3. 在**持續時間（分鐘）**欄位中，輸入您預期作業會執行直到完成為止的分鐘數。預估持續時間會用來計算預期的部署時間。

3. 在**標籤**清單中，將標籤附加至作業。您可以選取多個標籤。若要建立標籤，請在清單的文字欄位中鍵入標籤名稱。

3. 在**應用程式名稱**清單中，選取應用程式。

3. 在**處理程序**清單中，選取應用程式程序。有屬於所選取 UrbanCode Deploy 應用程式的處理程序可供使用。

3. 在**環境**清單中，選取應用程式環境。有屬於所選取 UrbanCode Deploy 應用程式的環境可供使用。若要將選取環境延遲到您準備好要執行部署時，請選取**使用版本標籤**。

3. 在**版本**清單中，選取應用程式版本。版本參照 IBM UrbanCode Deploy 應用程式 Snapshot。有屬於所選取應用程式的版本可供使用。若要延遲選取版本，請選取**使用版本標籤**。如果應用程式程序不需要版本，請選取**無版本**。如果您要執行不需要元件的配置類型處理程序，則可以選取這最後一個選項。

3. 在**已指派的群組及使用者**清單中，將作業指派給使用者或群組。指派的使用者會在部署期間執行作業。

3. 在**擁有者**清單中，選取作業擁有者。預設擁有者即建立作業的使用者。將作業指派給使用者或群組之後，即會顯示**擁有者**清單。    

5. 按一下**儲存**。即會將作業插入到部署計劃。

建立作業之後，會使用指派給作業的應用程式資訊來更新計劃的**版本**標籤。如果您已針對應用程式環境及版本選取**使用版本標籤**，請先使用「版本」標籤來設定這些選項，然後再執行部署。

## 建立手動作業
{: #tasks_manual}

一般而言，手動作業代表某個活動，而此活動與具有起點、結束點及可測量持續時間的軟體版本相關聯。

請完成下列作業來建立手動作業：

1. 在「部署計劃詳細資料」頁面上，按一下**建立作業**。如果您要在計劃的特定位置插入作業，請在使用**建立作業**之前選取作業。新的作業會插入到所選取作業的上方。

1. 在「建立作業」對話框中，於**類型**清單中選取**手動**。

1. 在**名稱**欄位中，輸入作業的名稱。

3. 在**持續時間（分鐘）**欄位中，輸入您預期作業會執行直到完成為止的分鐘數。預估持續時間會用來計算預期的部署時間。

3. 在**標籤**清單中，將標籤附加至作業。您可以選取多個標籤。若要建立標籤，請在清單的文字欄位中鍵入標籤名稱。

3. 在**已指派的群組及使用者**清單中，將作業指派給使用者或群組。指派的使用者會在部署期間執行作業。

3. 在**擁有者**清單中，選取作業擁有者。預設擁有者即建立作業的使用者。將作業指派給使用者或群組之後，即會顯示**擁有者**清單。    

5. 按一下**儲存**。即會將作業插入到部署計劃。

## 建立延遲作業
{: #tasks_delayed}

延遲類型作業代表部署期間的里程碑或重大事件。使用延遲作業，您可以確保重要作業在預期時間開始。一般而言，延遲作業是其他重要作業的必要條件。

延遲作業會在有資格執行時立即啟動，並在使用者指定的時間完成。已啟動延遲類型作業的狀態為 `In Progress`，直到達到其計劃時間，則其狀態會變更為 `Complete`。延遲作業完成時，與它相依的自動作業就會開始執行。

請完成下列作業來建立延遲作業：

1. 在「部署計劃詳細資料」頁面上，按一下**建立作業**。如果您要在計劃的特定位置插入作業，請在使用**建立作業**之前選取作業。新的作業會插入到所選取作業的上方。

1. 在「建立作業」對話框中，於**類型**清單中選取**延遲**。

1. 在**名稱**欄位中，輸入作業的名稱。

3. 在**時間**欄位中，輸入或選取作業將完成的時間。

3. 在**時區**清單中，選取**時間**欄位中所輸入值的時區。    

5. 按一下**儲存**。即會將作業插入到部署計劃。

## 建立標頭作業
{: #tasks_header}

標頭作業代表您可以新增至部署計劃的組織元素。如果您建立作業群組，則可以識別具有標頭作業的群組。標頭作業可以有相依關係，就像任何其他作業一樣。

當您從 IBM UrbanCode Release 匯入部署計劃時，會將區段作業括上 note-type「開始區段」及「結束區段」作業。區段相依關係是以與「結束區段」作業的相依關係代表。

若要建立標頭作業，請完成下列步驟：

1. 在「部署計劃詳細資料」頁面上，按一下**建立作業**。如果您要在計劃的特定位置插入作業，請在使用**建立作業**之前選取作業。新的作業會插入到所選取作業的上方。

1. 在「建立作業」對話框中，於**類型**清單中選取**標頭**。

1. 在**名稱**欄位中，輸入作業的名稱。名稱可能代表作業群組名稱。

3. 在**說明**欄位中，輸入或貼上說明。您可以在欄位中輸入附註、備忘或其他指示。

5. 按一下**儲存**。即會將作業插入到部署計劃。

## 建立 Continuous Delivery 管線作業
{: #tasks_pipelineCD}

{{site.data.keyword.contdelivery_full}} 管線會將您的 DevOps 工作流程自動化。管線是擷取輸入及執行工作的一系列階段。您可以使用管線作業來管理您的 {{site.data.keyword.contdelivery_short}} 管線。Continuous Delivery 管線作業是自動作業，會在有資格執行時立即啟動。

若要建立 Continuous Delivery 管線作業，請完成下列步驟：

1. 在「部署計劃詳細資料」頁面上，按一下**建立作業**。如果您要在計劃的特定位置插入作業，請在使用**建立作業**動作之前選取作業。新的作業會插入到所選取作業的前面。

1. 在「建立作業」對話框中，於**類型**清單中選取 **Continuous Delivery 管線**。

1. 在**名稱**欄位中，輸入作業的名稱。

3. 在**說明**欄位中，輸入或貼上說明。您可以在欄位中輸入附註、備忘或其他指示。

3. 在**管線**欄位中，輸入或選取管線。

3. 在**階段名稱**欄位中，輸入或選取階段名稱。有針對所選取管線所定義的階段可供使用。

3. 在**標籤**清單中，將標籤附加至作業。您可以選取多個標籤。若要建立標籤，請在清單的文字欄位中鍵入標籤名稱。

3. 在**已指派的群組及使用者**清單中，將作業指派給使用者或群組。指派的使用者會在部署期間執行作業。

3. 在**擁有者**清單中，選取作業擁有者。預設擁有者即建立作業的使用者。將作業指派給使用者或群組之後，即會顯示**擁有者**清單。    

5. 按一下**儲存**。即會將作業插入到部署計劃。

執行 Continuous Delivery 管線作業時，它會在所選取管線的指定階段上執行工作。

## 建立電子郵件作業
{: #tasks_email}

電子郵件作業會在作業執行時傳送電子郵件訊息。當您建立作業時，可以指定電子郵件的收件者及訊息。電子郵件作業是自動作業，會在有資格執行時立即啟動。

若要建立電子郵件作業，請完成下列步驟：

1. 在「部署計劃詳細資料」頁面上，按一下**建立作業**。如果您要在計劃的特定位置插入作業，請在使用**建立作業**動作之前選取作業。新的作業會插入到所選取作業的前面。

1. 在「建立作業」對話框中，於**類型**清單中選取**電子郵件**。

1. 在**名稱**欄位中，輸入作業的名稱。

3. 在**收件者**欄位中，輸入或選取電子郵件的收件者。可用的收件者清單包括為團隊成員的使用者和群組。您也可以鍵入非團隊成員的電子郵件位址。您可以指定多個收件者。

3. 在**電子郵件主旨**欄位中，輸入電子郵件主題。

3. 在**電子郵件訊息**欄位中，輸入或貼上電子郵件訊息。

5. 按一下**儲存**。即會將作業插入到部署計劃。

若執行作業，當您建立作業時，收件者會從 **IBM Continuous Release** 收到含有所指定主旨的電子郵件。

## 建立執行另一個計劃作業
{: #tasks_runAnother}

執行另一個計劃作業會執行另一個部署計劃的部署。必須從範本建立目標計劃。範本及目標計劃都必須在與具有執行另一個計劃作業的計劃相同的版本事件中。

請注意，這是實驗性作業類型。

若要建立執行另一個計劃作業，請完成下列步驟：

1. 在「部署計劃詳細資料」頁面上，按一下**建立作業**。如果您要在計劃的特定位置插入作業，請在使用**建立作業**動作之前選取作業。新的作業會插入到所選取作業的前面。

1. 在「建立作業」對話框中，於**類型**清單中選取**執行另一個計劃**。

1. 在**名稱**欄位中，輸入作業的名稱。

3. 在**計劃範本名稱**清單中，選取部署計劃範本。範本必須在與作業之母計劃相同的版本事件中。

3. 在**標籤**清單中，將標籤附加至作業。您可以選取多個標籤。若要建立標籤，請在文字框中鍵入標籤名稱。

5. 按一下**儲存**。即會將作業插入到部署計劃。

若執行作業，會針對從所選取範本建立及在相同版本事件中的部署計劃啟動部署。如果版本事件中有多個計劃是從範本所建立，則會啟動所有計劃的部署。另一個部署執行時，會由執行另一個計劃作業提供狀態資訊。展開作業，以查看狀態資訊。您可以使用作業上的鏈結，來開啟另一個部署。另一個部署執行時，執行另一個計劃作業的狀態為**進行中**。

## 建立 Slack 作業
{: #tasks_slack}

Slack 作業會在執行時將訊息傳送至 Slack 頻道。訊息可包含文字及超鏈結。Slack 作業會在有資格執行時立即啟動。

若要建立 Slack 作業，請完成下列步驟：

1. 在「部署計劃詳細資料」頁面上，按一下**建立作業**。如果您要在計劃的特定位置插入作業，請在使用**建立作業**動作之前選取作業。新的作業會插入到所選取作業的前面。

1. 在「建立作業」對話框中，於**類型**清單中選取 **Slack**。

1. 在**名稱**欄位中，輸入作業的名稱。

3. 在 **Webhook URL** 欄位中，輸入您要分送訊息的 Slack 頻道的 URL，例如，`https://hooks.slack.com/services/my_webhook`。

3. 在**訊息**方框中，輸入訊息內文。訊息可包含文字及超鏈結。

3. 在**持續時間（分鐘）**欄位中，輸入您預期作業會執行直到完成為止的分鐘數。預估持續時間會用來計算預期的部署時間。

3. 在**標籤**清單中，將標籤附加至作業。您可以選取多個標籤。若要建立標籤，請在文字框中鍵入標籤名稱。

3. 在**已指派的群組及使用者**清單中，將作業指派給使用者或群組。指派的使用者會在部署期間執行作業。

5. 按一下**儲存**。即會將作業插入到部署計劃。

若執行作業，會將「訊息」欄位中定義的訊息傳送至 Webhook URL 欄位中指定的 Slack 頻道。

## 管理作業群組
{: #tasks_groups}

您可以將兩個以上的作業結合成一個作業群組。當您建立群組時，會定義群組的執行型樣（循序或平行）。除非相依關係存在，否則您可以依任意順序執行平行型樣群組中的作業，也可以同步執行作業。循序群組中的作業會依清單順序進行，並且從第一個或最前面的作業開始。

您可以將群組內嵌在其他群組內。您可以將循序型樣群組內嵌在平行型樣群組內，反之亦然。不過，您無法將循序型樣群組內嵌在另一個循序群組內，也無法將平行型樣群組內嵌在另一個平行群組內。  

請完成下列步驟來建立作業群組。

1. 在「部署計劃詳細資料」頁面上，選取兩個以上的作業。

1. 根據您要建立之群組的類型，完成下列其中一個步驟。

  <ul>
  <li>若要建立平行群組，請按一下**平行**按鈕 <img class="inline" src="images/para-icon.png"  alt="「平行群組」按鈕">。如果您無法建立含有所選取作業的平行群組，則會停用此按鈕。例如，如果所有選取的作業都已在平行群組中，則您可能無法建立平行群組。
  </li>
  <li>若要建立循序群組，請按一下**循序**按鈕 <img class="inline" src="images/seq-icon.png"  alt="「循序群組」按鈕">。
  </li>
  </ul>

即會形成群組，並將**群組選取列**新增至部署計劃。如果您選取不連續的作業，則作業會形成一份從最前面的選取作業開始的連續清單。

下圖顯示平行群組。**群組選取列**會識別群組類型：平行 <img class="inline" src="images/para-select.png"  alt="平行群組選取"> 或循序 <img class="inline" src="images/seq-select.png"  alt="循序群組選取">。

![](images/group-select.png "一般部署計劃")

圖 2. 平行群組

若要移動群組，請選取**群組選取列**，或按一下群組上的任何位置，然後將它拖曳至新位置。

若要複製群組，請選取群組，按一下**複製** <img class="inline" src="images/copy-group.png"  alt="「複製」按鈕">，然後將游標放在您要插入所複製群組的位置，再按一下**貼上** <img class="inline" src="images/paste-group.png"  alt="「貼上」按鈕">。

若要剪下群組，請選取群組，然後按一下**剪下** <img class="inline" src="images/cut-group.png"  alt="「剪下」按鈕">。

若要將群組取消群組，請選取群組，然後按一下**群組選取列**上的**取消群組**圖示 <img class="inline" src="images/ungroup-icon.png"  alt="「取消群組」圖示">。

若要刪除群組中的作業，請選取群組，然後按一下**刪除** <img class="inline" src="images/trash-group.png"  alt="「刪除」按鈕">。即會從部署計劃中移除作業。

## 管理作業標籤
{: #tasks_tags}

標籤是您可以新增至作業的組織元素。您可以依標籤過濾部署計劃。例如，在部署至正式作業環境期間，您可以停用包含 `DEV_only` 標籤的作業，此標籤僅適用於開發環境。

若要將標籤新增至作業，請完成下列步驟。

1. 在「部署計劃詳細資料」頁面上，選取作業或作業群組，然後按一下**管理標籤**  <img class="inline" src="images/task-tag.png"  alt="管理標籤">。您可以選取多個作業及群組。

1. 在「管理所選取作業的標籤」對話框中，於**共用標籤**清單中選取標籤。您可以在清單的文字框中鍵入名稱，以建立新標籤。

1. 按一下**儲存**。

標籤即會顯示在「部署計劃詳細資料」頁面的作業列中。在下圖中，**部署 WAR** 作業獲指派兩個標籤：`Deployment` 及 `Critical`。

部署計劃所使用的標籤會顯示在「部署計劃詳細資料」頁面的**版本**標籤上。若要呈現部署中具有特定標籤 `Not Applicable` 的作業，請清除標籤。無法啟動狀態為 `Not Applicable` 的作業。  

![](images/task-tag-labels.png "一般部署計劃")

圖 3. 作業相依關係

## 建立作業相依關係
{: #tasks_dependencies}

您可以讓作業成為其他作業的必要條件。如果作業是一項必要條件，則在解決必要作業之前將無法啟動相依作業，即使相依作業符合資格。

作業可以有多個相依作業及多個必要作業。您可以定義作業與部署計劃中任何其他作業的相依關係。不過，無法建立循環相依關係。例如，您無法讓作業相依於本身與第一個作業相依的作業。

透過控制作業相依關係，您可以確定事件依其預期順序發生。

若要讓作業成為其他作業的必要條件，請完成下列步驟：

1. 在「部署計劃詳細資料」頁面上，選取作業或作業群組，然後按一下**管理必要條件** <img class="inline" src="images/task-depend.png"  alt="作業必要條件">。您可以選取多個作業及群組。

1. 在「管理所選取作業的必要條件」對話框中，於**所選取作業的必要作業**清單中選取必要作業。

1. 按一下**儲存**。

作業相依關係即會顯示在「部署計劃詳細資料」頁面的**相依關係**直欄中。上移鍵指出作業必要條件，下移鍵則指出作業相依關係。

在下圖中，第一個作業沒有任何必要條件，並且有兩個相依作業。第二個作業有一個必要作業，但沒有任何相依作業。

(![](images/plan-w-depend.png "一般部署計劃"))

圖 4. 作業相依關係

修改檢閱或修改相依關係，請選取作業，然後按一下**管理必要條件** <img class="inline" src="images/task-depend.png"  alt="作業必要條件">。請使用「管理所選取作業的必要條件」對話框，來修改或移除相依關係。
